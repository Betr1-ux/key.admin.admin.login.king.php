<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KING ADMIN - Generate Codes</title>
<style>
  body { background:#000; color:#0f0; font-family:Arial; padding:20px; }
  h2 { color:#0f0; }
  input, button { padding:8px; margin:5px; border-radius:8px; border:none; }
  input { width:120px; text-align:center; }
  button { background:#0f0; color:#000; cursor:pointer; font-weight:bold; }
  button:hover { background:#3f3; }
  table { border-collapse:collapse; width:100%; margin-top:15px; }
  th, td { border:1px solid #0f0; padding:6px; text-align:center; }
</style>
</head>
<body>

<h2>لوحة توليد الأكواد</h2>

<label>عدد الأكواد:</label>
<input type="number" id="numCodes" value="5" min="1" max="100"><br>
<label>عدد الاستخدامات لكل كود:</label>
<input type="number" id="uses" value="1" min="1"><br>
<button onclick="generateCodes()">توليد</button>
<button onclick="clearAll()">مسح الكل</button>

<h3>الأكواد المتاحة</h3>
<table>
  <thead>
    <tr>
      <th>الكود</th>
      <th>الاستخدامات المتبقية</th>
    </tr>
  </thead>
  <tbody id="codesTable"></tbody>
</table>

<script>
const STORAGE_KEY = "codes_storage_v1";

function loadData(){
  return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
}
function saveData(data){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}
function randomCode(){
  const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
  let c = "";
  for(let i=0;i<5;i++){ 
    for(let j=0;j<4;j++) c += chars[Math.floor(Math.random()*chars.length)];
    if(i<4) c += "-";
  }
  return c;
}
function generateCodes(){
  const num = parseInt(document.getElementById("numCodes").value);
  const uses = parseInt(document.getElementById("uses").value);
  const data = loadData();
  for(let i=0;i<num;i++){
    data.push({ code: randomCode(), remaining: uses });
  }
  saveData(data);
  renderTable();
}
function renderTable(){
  const data = loadData();
  const tbody = document.getElementById("codesTable");
  tbody.innerHTML = "";
  data.forEach(c=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${c.code}</td><td>${c.remaining}</td>`;
    tbody.appendChild(tr);
  });
}
function clearAll(){
  if(confirm("مسح كل الأكواد؟")){
    localStorage.removeItem(STORAGE_KEY);
    renderTable();
  }
}
renderTable();
</script>
</body>
</html>
